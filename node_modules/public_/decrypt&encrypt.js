var crypto=require('crypto'),iv='5683022032017429',default_key='751f621ea5c8f930';
exports.encrypt=function(key,data){
    var cipher=crypto.createCipheriv('aes-128',key,iv);
    var crypted=cipher.update(data,'utf8','binary');
    crypted+=cipher.final('binary');
    crypted=new Buffer(crypted,'binary').toString('base64');
    console.log(crypted);
    return crypted;
};
exports.decrypted=function(key,crypted){
    crypted=new Buffer(crypted,'base64').toString('binary');
    var decipher=crypto.createDecipheriv('aes-128-cbc',key,iv);
    var decoded=decipher.update(crypted,'binary','utf8');
    decoded+=decipher.final('uft8');
    return decoded;
};
var decrypted=function(key,crypted){
    crypted=new Buffer(crypted,'base64').toString('binary');
    var decipher=crypto.createDecipheriv('aes-128-cbc',key,iv);
    var decoded=decipher.update(crypted,'binary','utf8');
    // decoded+=decipher.final('uft8');
    console.log(decoded);
    return decoded;
};
var encrypt=function(key,data){
    var cipher=crypto.createCipheriv('aes-128',key,iv);
    var crypted=cipher.update(data,'utf8','binary');
    crypted+=cipher.final('binary');
    crypted=new Buffer(crypted,'binary').toString('base64');
    console.log(crypted);
    return crypted;
};
var me=document.getElementById('me');

var key='123'+default_key.substring('123'.length);
var test=encrypt(key, 'aavc');
var test2=decrypted(key, test);
console.log('?');
console.log(test2);
console.log('!');